<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Galaxy Attack</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0c0c2e, #1a1a4a);
            color: white;
            overflow: hidden;
            direction: rtl;
        }

        #loadingScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0c0c2e, #1a1a4a);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .loading-content {
            text-align: center;
        }

        .loader {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(255,255,255,0.3);
            border-top: 4px solid #4fc3f7;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .screen {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0c0c2e, #1a1a4a);
        }

        .screen.active {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .screen-content {
            background: rgba(255,255,255,0.1);
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .menu-btn {
            padding: 15px 30px;
            font-size: 1.2em;
            background: #2196f3;
            color: white;
            border: none;
            border-radius: 10px;
            margin: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .menu-btn:hover {
            transform: translateY(-2px);
            background: #1976d2;
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen">
        <div class="loading-content">
            <div class="loader"></div>
            <h2>ğŸš€ Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Galaxy Attack...</h2>
            <p>Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„ÙØ¶Ø§Ø¡ Ù„Ù„Ù‚ØªØ§Ù„</p>
        </div>
    </div>

    <!-- Start Screen -->
    <div id="startScreen" class="screen">
        <div class="screen-content">
            <h1>ğŸŒŒ Galaxy Attack</h1>
            <div style="margin: 30px 0;">
                <button class="menu-btn" onclick="showScreen('levelSelectScreen')">ğŸ® Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©</button>
                <button class="menu-btn" onclick="showScreen('shipsScreen')">ğŸš€ Ø§Ù„Ø£Ø³Ø·ÙˆÙ„</button>
                <button class="menu-btn" onclick="showScreen('upgradesScreen')">âš¡ Ø§Ù„ØªØ±Ù‚ÙŠØ§Øª</button>
            </div>
            <div>
                <p>ğŸ’° Ø§Ù„Ø¹Ù…Ù„Ø§Øª: <span id="coins">1000</span></p>
                <p>ğŸ’ Ø§Ù„Ø£Ø­Ø¬Ø§Ø±: <span id="gems">50</span></p>
            </div>
        </div>
    </div>

    <!-- Level Select Screen -->
    <div id="levelSelectScreen" class="screen">
        <div class="screen-content">
            <h2>ğŸ¯ Ø§Ø®ØªØ± Ø§Ù„Ù…Ø³ØªÙˆÙ‰</h2>
            <div id="levelGrid" style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; margin: 20px 0;">
                <!-- Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª Ø³ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
            </div>
            <button class="menu-btn" onclick="showScreen('startScreen')">â† Ø§Ù„Ø¹ÙˆØ¯Ø©</button>
        </div>
    </div>

    <!-- Ships Screen -->
    <div id="shipsScreen" class="screen">
        <div class="screen-content">
            <h2>ğŸš€ Ø§Ù„Ø£Ø³Ø·ÙˆÙ„ Ø§Ù„ÙØ¶Ø§Ø¦ÙŠ</h2>
            <div id="shipsContainer" style="margin: 20px 0;">
                <!-- Ø§Ù„Ø³ÙÙ† Ø³ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
            </div>
            <button class="menu-btn" onclick="showScreen('startScreen')">â† Ø§Ù„Ø¹ÙˆØ¯Ø©</button>
        </div>
    </div>

    <!-- Upgrades Screen -->
    <div id="upgradesScreen" class="screen">
        <div class="screen-content">
            <h2>âš¡ Ù…Ø±ÙƒØ² Ø§Ù„ØªØ±Ù‚ÙŠØ§Øª</h2>
            <div id="upgradesContainer" style="margin: 20px 0;">
                <!-- Ø§Ù„ØªØ±Ù‚ÙŠØ§Øª Ø³ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
            </div>
            <button class="menu-btn" onclick="showScreen('startScreen')">â† Ø§Ù„Ø¹ÙˆØ¯Ø©</button>
        </div>
    </div>

    <!-- Game Screen -->
    <div id="gameScreen" class="screen">
        <canvas id="gameCanvas" style="position: absolute; top:0; left:0; width:100%; height:100%;"></canvas>
        <div style="position: absolute; top:20px; left:20px; background: rgba(0,0,0,0.7); padding: 10px; border-radius: 10px;">
            <p>Ø§Ù„Ù…Ø³ØªÙˆÙ‰: <span id="currentLevel">1</span></p>
            <p>Ø§Ù„Ù†Ù‚Ø§Ø·: <span id="currentScore">0</span></p>
        </div>
        <button class="menu-btn" onclick="showScreen('startScreen')" style="position: absolute; bottom:20px; right:20px;">ğŸ  Ø®Ø±ÙˆØ¬</button>
    </div>

    <script>
        // ===== Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ Ø§Ù„Ù…Ø¨Ø³Ø· =====
        console.log('ğŸŒŒ Ø¨Ø¯Ø¡ ØªØ­Ù…ÙŠÙ„ Galaxy Attack...');

        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø©
        let gameData = {
            coins: 1000,
            gems: 50,
            currentLevel: 1,
            unlockedLevels: 1,
            selectedShip: 'basic',
            upgrades: {
                weapon: 1,
                shield: 1
            }
        };

        // Ø¯Ø§Ù„Ø© Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø´Ø§Ø´Ø§Øª
        function showScreen(screenName) {
            console.log('ğŸ”„ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰:', screenName);
            
            // Ø¥Ø®ÙØ§Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø´Ø§Ø´Ø§Øª
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
            const targetScreen = document.getElementById(screenName);
            if (targetScreen) {
                targetScreen.classList.add('active');
                
                // ØªØ­Ø¯ÙŠØ« Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø´Ø§Ø´Ø© Ø¥Ø°Ø§ Ù„Ø²Ù… Ø§Ù„Ø£Ù…Ø±
                updateScreenContent(screenName);
            }
        }

        // ØªØ­Ø¯ÙŠØ« Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø´Ø§Ø´Ø§Øª
        function updateScreenContent(screenName) {
            switch(screenName) {
                case 'levelSelectScreen':
                    generateLevels();
                    break;
                case 'shipsScreen':
                    generateShips();
                    break;
                case 'upgradesScreen':
                    generateUpgrades();
                    break;
            }
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ù…Ù„Ø§Øª Ø¯Ø§Ø¦Ù…Ø§Ù‹
            document.getElementById('coins').textContent = gameData.coins;
            document.getElementById('gems').textContent = gameData.gems;
        }

        // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª
        function generateLevels() {
            const levelGrid = document.getElementById('levelGrid');
            levelGrid.innerHTML = '';
            
            for (let i = 1; i <= 20; i++) {
                const levelBtn = document.createElement('button');
                levelBtn.className = 'menu-btn';
                levelBtn.textContent = i;
                levelBtn.style.width = '60px';
                levelBtn.style.height = '60px';
                
                if (i > gameData.unlockedLevels) {
                    levelBtn.disabled = true;
                    levelBtn.textContent = 'ğŸ”’';
                    levelBtn.style.background = '#666';
                } else {
                    levelBtn.onclick = () => startLevel(i);
                }
                
                levelGrid.appendChild(levelBtn);
            }
        }

        // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø³ÙÙ†
        function generateShips() {
            const shipsContainer = document.getElementById('shipsContainer');
            shipsContainer.innerHTML = '';
            
            const ships = [
                { id: 'basic', name: 'Ø§Ù„Ø·Ø§Ø¦Ø±Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©', price: 0, unlocked: true },
                { id: 'fighter', name: 'Ø§Ù„Ù…Ù‚Ø§ØªÙ„Ø© Ø§Ù„Ø³Ø±ÙŠØ¹Ø©', price: 500, unlocked: false },
                { id: 'tank', name: 'Ø§Ù„Ø¯Ø¨Ø§Ø¨Ø© Ø§Ù„ÙØ¶Ø§Ø¦ÙŠØ©', price: 800, unlocked: false }
            ];
            
            ships.forEach(ship => {
                const shipDiv = document.createElement('div');
                shipDiv.style.background = 'rgba(255,255,255,0.1)';
                shipDiv.style.padding = '15px';
                shipDiv.style.margin = '10px';
                shipDiv.style.borderRadius = '10px';
                shipDiv.style.border = gameData.selectedShip === ship.id ? '2px solid #4fc3f7' : 'none';
                
                shipDiv.innerHTML = `
                    <h3>ğŸš€ ${ship.name}</h3>
                    <p>${ship.unlocked ? 'Ù…ÙØªÙˆØ­Ø©' : 'Ø³Ø¹Ø±: ' + ship.price + ' ğŸ’°'}</p>
                    ${ship.unlocked ? 
                        `<button class="menu-btn" onclick="selectShip('${ship.id}')" ${gameData.selectedShip === ship.id ? 'disabled' : ''}>
                            ${gameData.selectedShip === ship.id ? 'Ù…Ø­Ø¯Ø¯Ø©' : 'Ø§Ø®ØªÙŠØ§Ø±'}
                        </button>` :
                        `<button class="menu-btn" onclick="buyShip('${ship.id}')" ${gameData.coins >= ship.price ? '' : 'disabled'}>
                            Ø´Ø±Ø§Ø¡
                        </button>`
                    }
                `;
                
                shipsContainer.appendChild(shipDiv);
            });
        }

        // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªØ±Ù‚ÙŠØ§Øª
        function generateUpgrades() {
            const upgradesContainer = document.getElementById('upgradesContainer');
            upgradesContainer.innerHTML = '';
            
            const upgrades = [
                { id: 'weapon', name: 'Ù‚ÙˆØ© Ø§Ù„Ø³Ù„Ø§Ø­', level: gameData.upgrades.weapon, price: 50 },
                { id: 'shield', name: 'Ø§Ù„Ø¯Ø±Ø¹', level: gameData.upgrades.shield, price: 75 }
            ];
            
            upgrades.forEach(upgrade => {
                const upgradeDiv = document.createElement('div');
                upgradeDiv.style.background = 'rgba(255,255,255,0.1)';
                upgradeDiv.style.padding = '15px';
                upgradeDiv.style.margin = '10px';
                upgradeDiv.style.borderRadius = '10px';
                
                upgradeDiv.innerHTML = `
                    <h3>${upgrade.name}</h3>
                    <p>Ø§Ù„Ù…Ø³ØªÙˆÙ‰: ${upgrade.level}</p>
                    <p>Ø§Ù„Ø³Ø¹Ø±: ${upgrade.price} ğŸ’°</p>
                    <button class="menu-btn" onclick="buyUpgrade('${upgrade.id}')" ${gameData.coins >= upgrade.price ? '' : 'disabled'}>
                        ØªØ±Ù‚ÙŠØ©
                    </button>
                `;
                
                upgradesContainer.appendChild(upgradeDiv);
            });
        }

        // Ø¯ÙˆØ§Ù„ Ø§Ù„Ù„Ø¹Ø¨Ø©
        function selectShip(shipId) {
            gameData.selectedShip = shipId;
            generateShips();
            alert('âœ“ ØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø·Ø§Ø¦Ø±Ø© Ø¨Ù†Ø¬Ø§Ø­!');
        }

        function buyShip(shipId) {
            const ship = { id: 'fighter', price: 500 }; // Ù…Ø¨Ø³Ø· Ù„Ù„ØªÙˆØ¶ÙŠØ­
            if (gameData.coins >= ship.price) {
                gameData.coins -= ship.price;
                // ÙÙŠ Ø§Ù„ÙˆØ§Ù‚Ø¹ØŒ ÙŠØ¬Ø¨ ÙØªØ­ Ø§Ù„Ø³ÙÙŠÙ†Ø©
                alert('âœ“ ØªÙ… Ø´Ø±Ø§Ø¡ Ø§Ù„Ø·Ø§Ø¦Ø±Ø© Ø¨Ù†Ø¬Ø§Ø­!');
                generateShips();
                updateScreenContent('shipsScreen');
            }
        }

        function buyUpgrade(upgradeId) {
            const upgrade = { price: 50 }; // Ù…Ø¨Ø³Ø· Ù„Ù„ØªÙˆØ¶ÙŠØ­
            if (gameData.coins >= upgrade.price) {
                gameData.coins -= upgrade.price;
                gameData.upgrades[upgradeId]++;
                alert('âœ“ ØªÙ…Øª Ø§Ù„ØªØ±Ù‚ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­!');
                generateUpgrades();
                updateScreenContent('upgradesScreen');
            }
        }

        function startLevel(level) {
            gameData.currentLevel = level;
            showScreen('gameScreen');
            startGame();
        }

        function startGame() {
            const canvas = document.getElementById('gameCanvas');
            const ctx = canvas.getContext('2d');
            
            // Ø¶Ø¨Ø· Ø­Ø¬Ù… Ø§Ù„ÙƒØ§Ù†ÙØ§Ø³
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            
            // Ù„Ø§Ø¹Ø¨
            const player = {
                x: canvas.width / 2 - 25,
                y: canvas.height - 100,
                width: 50,
                height: 50,
                color: '#4fc3f7'
            };
            
            // Ø§Ù„ØªØ­ÙƒÙ…
            document.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowLeft') player.x = Math.max(0, player.x - 10);
                if (e.key === 'ArrowRight') player.x = Math.min(canvas.width - player.width, player.x + 10);
            });
            
            // Ø§Ù„Ù„Ø¹Ø¨Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
            function gameLoop() {
                // Ù…Ø³Ø­ Ø§Ù„Ø´Ø§Ø´Ø©
                ctx.fillStyle = 'rgba(12, 12, 46, 0.1)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Ø±Ø³Ù… Ø§Ù„Ù†Ø¬ÙˆÙ…
                ctx.fillStyle = '#ffffff';
                for (let i = 0; i < 50; i++) {
                    ctx.fillRect(Math.random() * canvas.width, Math.random() * canvas.height, 2, 2);
                }
                
                // Ø±Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨
                ctx.fillStyle = player.color;
                ctx.fillRect(player.x, player.y, player.width, player.height);
                
                // Ø§Ø³ØªÙ…Ø±Ø§Ø± Ø§Ù„Ù„Ø¹Ø¨Ø©
                requestAnimationFrame(gameLoop);
            }
            
            gameLoop();
            
            // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©
            document.getElementById('currentLevel').textContent = gameData.currentLevel;
        }

        // ===== Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© =====
        window.addEventListener('load', function() {
            console.log('âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„');
            
            // Ø¥Ø®ÙØ§Ø¡ Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø¨Ø¹Ø¯ Ø«Ø§Ù†ÙŠØªÙŠÙ† (Ø¶Ù…Ø§Ù†Ø§Ù‹)
            setTimeout(() => {
                const loadingScreen = document.getElementById('loadingScreen');
                if (loadingScreen) {
                    loadingScreen.style.display = 'none';
                }
                
                // Ø¥Ø¸Ù‡Ø§Ø± Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©
                showScreen('startScreen');
                
                console.log('ğŸ® Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¬Ø§Ù‡Ø²Ø©!');
            }, 1000);
        });

        // Ø­Ù„ Ø§Ø­ØªÙŠØ§Ø·ÙŠ: Ø¥Ø®ÙØ§Ø¡ Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø¥Ø°Ø§ Ø­Ø¯Ø« Ø£ÙŠ Ø®Ø·Ø£
        window.addEventListener('error', function() {
            const loadingScreen = document.getElementById('loadingScreen');
            if (loadingScreen) {
                loadingScreen.style.display = 'none';
            }
            showScreen('startScreen');
        });

        // Ø¥Ø®ÙØ§Ø¡ Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø£ÙŠ Ù…ÙØªØ§Ø­ (Ù„Ù„ØªØ·ÙˆÙŠØ±)
        document.addEventListener('keydown', function() {
            const loadingScreen = document.getElementById('loadingScreen');
            if (loadingScreen && loadingScreen.style.display !== 'none') {
                loadingScreen.style.display = 'none';
                showScreen('startScreen');
            }
        });
    </script>
</body>
</html>
